(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{5865:function(r,n,t){"use strict";var e=t(9008),i=t.n(e);t(7378);var o=t(4246);n.Z=function(r){return(0,o.jsx)(i(),{children:(0,o.jsx)("title",{children:"next-shop"})})}},2131:function(r,n,t){"use strict";t.d(n,{Z:function(){return b}});var e=t(9499),i=t(2779),o=t(7378),c=t(7050),a=t(7191),u=t(2640),l=t(7253),d=t(1664),s=t.n(d),p=t(9649),f=t(4246),g=function(r){var n=(0,i.a)(c.N4,{variables:{id:r._id}}),t=n.data;n.loading,n.error,n.refetch;var e=(0,l.D)(p.yf,{refetchQueries:[{query:p.Rp}]}),o=(0,u.Z)(e,2),d=o[0];return((0,a.Z)(o[1]),t)?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("li",{className:"border-2 border-solid flex flex-col text-center justify-center py-4",children:[(0,f.jsxs)(s(),{href:"/products/".concat(t.product._id),children:[(0,f.jsx)("p",{className:"",children:t.product.title}),(0,f.jsx)("img",{className:"mx-auto w-[200px]",src:t.product.imageUrl})]}),(0,f.jsxs)("span",{className:"product-item__price",children:["₩",t.product.price.toLocaleString("ko-KR")]}),(0,f.jsx)("button",{className:"border-2 w-32 mx-auto ",onClick:function(n){d({variables:{productId:r._id}})},children:"담기"})]})}):null};function m(r,n){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);n&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,e)}return t}function y(r){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach(function(n){(0,e.Z)(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var b=function(r){var n=(0,o.useState)("전체"),t=n[0],e=n[1],a=(0,i.a)(c.UX,{variables:{category:t}}),u=a.data;a.loading,a.error,a.refetch;var l=function(r){e(r.target.value)};return u?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:" flex justify-center items-center h-32 mt-16 border-b-2 border-gray-700",children:(0,f.jsx)("h1",{className:"text-5xl font-bold ",children:"상품 목록"})}),(0,f.jsxs)("div",{className:"flex justify-center items-center w-full mt-16  ",children:[(0,f.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow mr-5",onClick:l,value:"전체",children:"전체"}),(0,f.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow mr-5",onClick:l,value:"음료",children:"음료"}),(0,f.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow mr-5",value:"빵",onClick:l,children:"빵"}),(0,f.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow mr-5",value:"과자",onClick:l,children:"과자"}),(0,f.jsx)("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",value:"아이스크림",onClick:l,children:"아이스크림"})]}),(0,f.jsx)("ul",{className:"grid grid-cols-4 gap-[10px] mt-20 px-10  min-w-[800px]",children:u.productFilter.map(function(r,n){return(0,o.createElement)(g,y(y({},r),{},{key:n}))})})]}):null}},7050:function(r,n,t){"use strict";t.d(n,{N4:function(){return p},Q7:function(){return m},UX:function(){return f},u7:function(){return y},zN:function(){return g}});var e,i,o,c,a,u,l,d=t(4660),s=t(949);(0,s.Ps)(e||(e=(0,d.Z)(["\n  query GET_PRODUCTS {\n    products {\n      _id\n      imageUrl\n      price\n      title\n      description\n      createdAt\n      category\n    }\n  }\n"]))),(0,s.Ps)(i||(i=(0,d.Z)(["\n  query GET_PRODUCTS_ID {\n    products {\n      _id\n    }\n  }\n"])));var p=(0,s.Ps)(o||(o=(0,d.Z)(["\n  query GET_PRODUCT($id: ID!) {\n    product(id: $id) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      createdAt\n      category\n    }\n  }\n"]))),f=(0,s.Ps)(c||(c=(0,d.Z)(["\n  query GET_PRODUCT_FILTER_ID($category: String!) {\n    productFilter(category: $category) {\n      _id\n    }\n  }\n"]))),g=(0,s.Ps)(a||(a=(0,d.Z)(["\n  mutation ADD_PRODUCT(\n    $imageUrl: String!\n    $price: Int!\n    $title: String!\n    $description: String!\n    $category: String!\n  ) {\n    addProduct(\n      imageUrl: $imageUrl\n      price: $price\n      title: $title\n      description: $description\n      category: $category\n    ) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      category\n      createdAt\n    }\n  }\n"]))),m=(0,s.Ps)(u||(u=(0,d.Z)(["\n  mutation UPDATE_PRODUCT(\n    $id: ID!\n    $imageUrl: String!\n    $price: Int!\n    $title: String!\n    $description: String!\n    $category: String!\n  ) {\n    updateProduct(\n      id: $id\n      imageUrl: $imageUrl\n      price: $price\n      title: $title\n      description: $description\n      category: $category\n    ) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      category\n      createdAt\n    }\n  }\n"]))),y=(0,s.Ps)(l||(l=(0,d.Z)(["\n  mutation DELETE_PRODUCT($id: ID!) {\n    deleteProduct(id: $id)\n  }\n"])))},301:function(r,n,t){"use strict";t.r(n),t(7378);var e=t(2131),i=t(5865),o=t(4246);n.default=function(r){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{}),(0,o.jsx)(e.Z,{})]})}},7153:function(r,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return t(301)}])},9008:function(r,n,t){r.exports=t(6505)},7191:function(r,n,t){"use strict";function e(r){if(null==r)throw TypeError("Cannot destructure undefined")}t.d(n,{Z:function(){return e}})},2640:function(r,n,t){"use strict";function e(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,e=Array(n);t<n;t++)e[t]=r[t];return e}function i(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var t,e,i=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=i){var o=[],c=!0,a=!1;try{for(i=i.call(r);!(c=(t=i.next()).done)&&(o.push(t.value),!n||o.length!==n);c=!0);}catch(u){a=!0,e=u}finally{try{c||null==i.return||i.return()}finally{if(a)throw e}}return o}}(r,n)||function(r,n){if(r){if("string"==typeof r)return e(r,n);var t=Object.prototype.toString.call(r).slice(8,-1);if("Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t)return Array.from(r);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e(r,n)}}(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return i}})},7253:function(r,n,t){"use strict";t.d(n,{D:function(){return d}});var e=t(9312),i=t(7378),o=t(79),c=t(2434),a=t(4062),u=t(3796),l=t(7959);function d(r,n){var t=(0,l.x)(null==n?void 0:n.client);(0,a.Vp)(r,a.n_.Mutation);var d=(0,i.useState)({called:!1,loading:!1,client:t}),s=d[0],p=d[1],f=(0,i.useRef)({result:s,mutationId:0,isMounted:!0,client:t,mutation:r,options:n});Object.assign(f.current,{client:t,options:n,mutation:r});var g=(0,i.useCallback)(function(r){void 0===r&&(r={});var n=f.current,t=n.client,i=n.options,a=n.mutation,l=(0,e.pi)((0,e.pi)({},i),{mutation:a});f.current.result.loading||l.ignoreResults||!f.current.isMounted||p(f.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var d=++f.current.mutationId,s=(0,o.J)(l,r);return t.mutate(s).then(function(n){var e,i,o,a=n.data,l=n.errors,g=l&&l.length>0?new u.c({graphQLErrors:l}):void 0;if(d===f.current.mutationId&&!s.ignoreResults){var m={called:!0,loading:!1,data:a,error:g,client:t};f.current.isMounted&&!(0,c.D)(f.current.result,m)&&p(f.current.result=m)}return null===(i=null===(e=f.current.options)||void 0===e?void 0:e.onCompleted)||void 0===i||i.call(e,n.data,s),null===(o=r.onCompleted)||void 0===o||o.call(r,n.data,s),n}).catch(function(n){var e,i,o,a;if(d===f.current.mutationId&&f.current.isMounted){var u={loading:!1,error:n,data:void 0,called:!0,client:t};(0,c.D)(f.current.result,u)||p(f.current.result=u)}if((null===(e=f.current.options)||void 0===e?void 0:e.onError)||s.onError)return null===(o=null===(i=f.current.options)||void 0===i?void 0:i.onError)||void 0===o||o.call(i,n,s),null===(a=r.onError)||void 0===a||a.call(r,n,s),{data:void 0,errors:n};throw n})},[]),m=(0,i.useCallback)(function(){f.current.isMounted&&p({called:!1,loading:!1,client:t})},[]);return(0,i.useEffect)(function(){return f.current.isMounted=!0,function(){f.current.isMounted=!1}},[]),[g,(0,e.pi)({reset:m},s)]}}},function(r){r.O(0,[774,888,179],function(){return r(r.s=7153)}),_N_E=r.O()}]);