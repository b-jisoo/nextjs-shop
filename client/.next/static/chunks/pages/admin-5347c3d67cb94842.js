(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5865:function(e,r,t){"use strict";var n=t(9008),o=t.n(n);t(7378);var i=t(4246);r.Z=function(e){return(0,i.jsx)(o(),{children:(0,i.jsx)("title",{children:"next-shop"})})}},7050:function(e,r,t){"use strict";t.d(r,{N4:function(){return g},Q7:function(){return m},UX:function(){return b},u7:function(){return f},zN:function(){return p}});var n,o,i,a,l,c,u,d=t(4660),s=t(949);(0,s.Ps)(n||(n=(0,d.Z)(["\n  query GET_PRODUCTS {\n    products {\n      _id\n      imageUrl\n      price\n      title\n      description\n      createdAt\n      category\n    }\n  }\n"]))),(0,s.Ps)(o||(o=(0,d.Z)(["\n  query GET_PRODUCTS_ID {\n    products {\n      _id\n    }\n  }\n"])));var g=(0,s.Ps)(i||(i=(0,d.Z)(["\n  query GET_PRODUCT($id: ID!) {\n    product(id: $id) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      createdAt\n      category\n    }\n  }\n"]))),b=(0,s.Ps)(a||(a=(0,d.Z)(["\n  query GET_PRODUCT_FILTER_ID($category: String!) {\n    productFilter(category: $category) {\n      _id\n    }\n  }\n"]))),p=(0,s.Ps)(l||(l=(0,d.Z)(["\n  mutation ADD_PRODUCT(\n    $imageUrl: String!\n    $price: Int!\n    $title: String!\n    $description: String!\n    $category: String!\n  ) {\n    addProduct(\n      imageUrl: $imageUrl\n      price: $price\n      title: $title\n      description: $description\n      category: $category\n    ) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      category\n      createdAt\n    }\n  }\n"]))),m=(0,s.Ps)(c||(c=(0,d.Z)(["\n  mutation UPDATE_PRODUCT(\n    $id: ID!\n    $imageUrl: String!\n    $price: Int!\n    $title: String!\n    $description: String!\n    $category: String!\n  ) {\n    updateProduct(\n      id: $id\n      imageUrl: $imageUrl\n      price: $price\n      title: $title\n      description: $description\n      category: $category\n    ) {\n      _id\n      imageUrl\n      price\n      title\n      description\n      category\n      createdAt\n    }\n  }\n"]))),f=(0,s.Ps)(u||(u=(0,d.Z)(["\n  mutation DELETE_PRODUCT($id: ID!) {\n    deleteProduct(id: $id)\n  }\n"])))},7806:function(e,r,t){"use strict";t.r(r),t.d(r,{ALL_PRODUCTS:function(){return P},default:function(){return N}});var n=t(9499),o=t(2779),i=t(2640),a=t(7253),l=t(7378),c=t(7050),u=t(4246);function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var g=function(e){alert("".concat(e.addProduct.title,"가 추가되었습니다."))},b=function(e){var r=(0,l.useState)({title:"",imageUrl:"",price:"",description:"",category:"음료"}),t=r[0],o=r[1],d=(0,a.D)(c.zN,{onCompleted:g,refetchQueries:[{query:c.UX,variables:{category:P}}]}),b=(0,i.Z)(d,2),p=b[0],m=b[1];m.data,m.loading,m.error;var f=function(e){var r=e.target,i=r.name,a=r.value;o(s(s({},t),{},(0,n.Z)({},i,["price"].includes(i)?Number(a):a)))};return(0,u.jsxs)("div",{className:"mt-32 w-96 mx-auto mb-20",children:[(0,u.jsx)("div",{className:"mb-10",children:"어드민"}),(0,u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p({variables:t})},children:[(0,u.jsxs)("div",{className:"grid gap-6 mb-6 md:grid-cols-2",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"상품명"}),(0,u.jsx)("input",{type:"text",id:"title",name:"title",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"상품명",onChange:f,value:t.title,required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"imageUrl",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"이미지 URL"}),(0,u.jsx)("input",{type:"url",id:"imageUrl",name:"imageUrl",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"이미지 URL",onChange:f,value:t.imageUrl,required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"price",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"가격"}),(0,u.jsx)("input",{type:"number",id:"price",name:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"가격",min:0,onChange:f,value:t.price,required:!0})]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"상세 설명"}),(0,u.jsx)("input",{type:"textarea",id:"description",name:"description",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"상세 설명",onChange:f,value:t.description,required:!0})]}),(0,u.jsx)("label",{htmlFor:"category",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"카테고리"}),(0,u.jsxs)("select",{className:"border-2 mr-3",name:"category",id:"category",onChange:f,value:t.category,children:[(0,u.jsx)("option",{value:"음료",children:"음료"}),(0,u.jsx)("option",{value:"빵",children:"빵"}),(0,u.jsx)("option",{value:"과자",children:"과자"}),(0,u.jsx)("option",{value:"아이스크림",children:"아이스크림"})]}),(0,u.jsx)("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"등록"})]})]})},p=t(1664),m=t.n(p);function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var h=function(e){var r=(0,l.useState)({id:e.product._id,title:e.product.title,imageUrl:e.product.imageUrl,price:e.product.price,description:e.product.description,category:e.product.category}),t=r[0],o=r[1],d=(0,a.D)(c.Q7,{onCompleted:function(e){alert("".concat(e.updateProduct.title,"로 변경되었습니다."))},refetchQueries:[{query:c.UX,variables:{category:P}}]}),s=(0,i.Z)(d,2),g=s[0],b=s[1];b.data,b.loading,b.error;var p=function(e){var r=e.target,i=r.name,a=r.value;o(y(y({},t),{},(0,n.Z)({},i,["price"].includes(i)?Number(a):a)))};return(0,u.jsx)("li",{className:"border-2 p-5",children:(0,u.jsxs)("form",{onSubmit:function(r){r.preventDefault(),g({variables:t}),e.doneEditing()},children:[(0,u.jsxs)("div",{className:"grid gap-6 mb-6 md:grid-cols-2",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"상품명"}),(0,u.jsx)("input",{type:"text",id:"title",name:"title",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"상품명",onChange:p,value:t.title,required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"imageUrl",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"이미지 URL"}),(0,u.jsx)("input",{type:"url",id:"imageUrl",name:"imageUrl",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"이미지 URL",onChange:p,value:t.imageUrl,required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{htmlFor:"price",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"가격"}),(0,u.jsx)("input",{type:"number",id:"price",name:"price",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"가격",min:0,onChange:p,value:t.price,required:!0})]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"상세 설명"}),(0,u.jsx)("input",{type:"textarea",id:"description",name:"description",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"상세 설명",onChange:p,value:t.description,required:!0})]}),(0,u.jsx)("label",{htmlFor:"category",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"카테고리"}),(0,u.jsxs)("select",{className:"border-2 mr-3",name:"category",id:"category",onChange:p,value:t.category,children:[(0,u.jsx)("option",{value:"음료",children:"음료"}),(0,u.jsx)("option",{value:"빵",children:"빵"}),(0,u.jsx)("option",{value:"과자",children:"과자"}),(0,u.jsx)("option",{value:"아이스크림",children:"아이스크림"})]}),(0,u.jsx)("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"등록"}),(0,u.jsx)("button",{className:"text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 ml-2",onClick:e.doneEditing,children:"취소"})]})})},x=function(e){var r=(0,o.a)(c.N4,{variables:{id:e._id}}),t=r.data;r.loading,r.error,r.refetch;var n=(0,l.useState)(!1),d=n[0],s=n[1],g=(0,a.D)(c.u7,{onCompleted:function(e){alert("삭제되었습니다")},refetchQueries:[{query:c.UX,variables:{category:P}}]}),b=(0,i.Z)(g,1)[0],p=function(){s(!d)};return t?d?(0,u.jsx)(h,{product:t.product,doneEditing:p}):(0,u.jsxs)("li",{className:"border-2 border-solid flex flex-col text-center justify-center py-4",children:[(0,u.jsxs)(m(),{href:"/products/".concat(t.product._id),children:[(0,u.jsx)("p",{className:"font-bold",children:null==t?void 0:t.product.title}),(0,u.jsx)("img",{className:"mx-auto w-[200px]",src:null==t?void 0:t.product.imageUrl}),(0,u.jsxs)("span",{className:"product-item__price",children:["₩",null==t?void 0:t.product.price.toLocaleString("ko-KR")]})]}),(0,u.jsx)("button",{className:"border-2 w-32 mx-auto ",onClick:p,children:"수정"}),(0,u.jsx)("button",{className:"border-2 w-32 mx-auto text-white bg-red-700 hover:bg-red-800 ",onClick:function(){confirm("이 상품을 삭제하시겠습니까?")&&b({variables:{id:null==t?void 0:t.product._id}})},children:"삭제"})]}):null};function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var k=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("ul",{className:"grid grid-cols-4 gap-[10px]  px-10 min-w-[800px]",children:e.productFilter.map(function(e,r){return(0,l.createElement)(x,j(j({},e),{},{key:r}))})})})},O=t(5865);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var P="전체",N=function(e){var r=(0,o.a)(c.UX,{variables:{category:P}}),t=r.data;return(r.loading,r.error,r.refetch,t)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(O.Z,{}),(0,u.jsx)(b,{}),(0,u.jsx)(k,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},t))]}):null}},577:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(7806)}])},9008:function(e,r,t){e.exports=t(6505)},2640:function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(c){l=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(l)throw n}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(r,{Z:function(){return o}})},7253:function(e,r,t){"use strict";t.d(r,{D:function(){return d}});var n=t(9312),o=t(7378),i=t(79),a=t(2434),l=t(4062),c=t(3796),u=t(7959);function d(e,r){var t=(0,u.x)(null==r?void 0:r.client);(0,l.Vp)(e,l.n_.Mutation);var d=(0,o.useState)({called:!1,loading:!1,client:t}),s=d[0],g=d[1],b=(0,o.useRef)({result:s,mutationId:0,isMounted:!0,client:t,mutation:e,options:r});Object.assign(b.current,{client:t,options:r,mutation:e});var p=(0,o.useCallback)(function(e){void 0===e&&(e={});var r=b.current,t=r.client,o=r.options,l=r.mutation,u=(0,n.pi)((0,n.pi)({},o),{mutation:l});b.current.result.loading||u.ignoreResults||!b.current.isMounted||g(b.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var d=++b.current.mutationId,s=(0,i.J)(u,e);return t.mutate(s).then(function(r){var n,o,i,l=r.data,u=r.errors,p=u&&u.length>0?new c.c({graphQLErrors:u}):void 0;if(d===b.current.mutationId&&!s.ignoreResults){var m={called:!0,loading:!1,data:l,error:p,client:t};b.current.isMounted&&!(0,a.D)(b.current.result,m)&&g(b.current.result=m)}return null===(o=null===(n=b.current.options)||void 0===n?void 0:n.onCompleted)||void 0===o||o.call(n,r.data,s),null===(i=e.onCompleted)||void 0===i||i.call(e,r.data,s),r}).catch(function(r){var n,o,i,l;if(d===b.current.mutationId&&b.current.isMounted){var c={loading:!1,error:r,data:void 0,called:!0,client:t};(0,a.D)(b.current.result,c)||g(b.current.result=c)}if((null===(n=b.current.options)||void 0===n?void 0:n.onError)||s.onError)return null===(i=null===(o=b.current.options)||void 0===o?void 0:o.onError)||void 0===i||i.call(o,r,s),null===(l=e.onError)||void 0===l||l.call(e,r,s),{data:void 0,errors:r};throw r})},[]),m=(0,o.useCallback)(function(){b.current.isMounted&&g({called:!1,loading:!1,client:t})},[]);return(0,o.useEffect)(function(){return b.current.isMounted=!0,function(){b.current.isMounted=!1}},[]),[p,(0,n.pi)({reset:m},s)]}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=577)}),_N_E=e.O()}]);